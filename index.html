<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auguri di Natale!</title>
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
    
    <style>
        /* --- STILE GENERALE --- */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Fredoka', sans-serif;
        }

        #scena {
            position: relative;
            width: 100%;
            height: 100vh;
            /* IMPORTANTE: Assicurati che la tua immagine si chiami 'sfondo.png' */
            background-image: url('sfondo.png'); 
            background-size: cover;
            background-position: center;
        }

        /* --- I REGALI (Area Cliccabile a SINISTRA) --- */
        #area-regali {
            position: absolute;
            /* Coordinate per i regali a sinistra nell'immagine che hai mandato */
            bottom: 5%;       
            left: 2%;     
            width: 25%;     
            height: 45%;
            cursor: pointer;
            
            /* Bordo tratteggiato giallo per vederlo (poi mettilo "none") */
            border: 3px dashed rgba(255, 255, 0, 0.6); 
            border-radius: 10px;
            
            /* Animazione "Saltello" */
            animation: saltello 3s infinite ease-in-out;
        }
        
        #area-regali:hover {
            background-color: rgba(255, 255, 255, 0.1);
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.4);
        }

        @keyframes saltello {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Fumetto "APRIMI" */
        .fumetto {
            position: absolute;
            top: -50px;
            left: 50%;
            transform: translateX(-50%) rotate(-5deg);
            background: #ff4757;
            color: white;
            padding: 10px 25px;
            border-radius: 50px;
            font-family: 'Luckiest Guy', cursive; /* Font cicciotto */
            font-size: 24px;
            letter-spacing: 1px;
            box-shadow: 4px 4px 0 #2f3542;
            white-space: nowrap;
            pointer-events: none;
        }
        
        .fumetto::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: #ff4757 transparent transparent transparent;
        }

        /* --- POPUP (Stile Legno e Calore) --- */
        #overlay-busta, #video-container {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 100;
            backdrop-filter: blur(8px);
        }

        .busta-box {
            background: #fff5e6; /* Crema caldo */
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            /* Bordo stile legno scuro */
            border: 8px solid #8b4513; 
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            max-width: 450px;
            width: 90%;
            position: relative;
        }

        /* Decorazione natalizia sopra il box */
        .busta-box::before {
            content: 'ðŸŽ„';
            font-size: 50px;
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
        }

        h2 { 
            color: #c0392b; 
            font-family: 'Luckiest Guy', cursive;
            font-size: 35px;
            margin-top: 20px;
            text-shadow: 2px 2px 0 #ffeaa7;
        }

        input {
            width: 70%;
            padding: 15px;
            font-size: 22px;
            margin: 20px 0;
            border: 3px solid #e1b12c;
            border-radius: 10px;
            text-align: center;
            font-family: 'Fredoka', sans-serif;
            background: #fff;
            color: #2d3436;
        }
        
        input:focus { 
            outline: none;
            border-color: #c0392b;
            box-shadow: 0 0 15px rgba(192, 57, 43, 0.3);
        }

        button {
            padding: 15px 40px;
            font-size: 24px;
            font-family: 'Luckiest Guy', cursive;
            background: #27ae60; /* Verde natale */
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            border-bottom: 5px solid #1e8449; /* Effetto 3D */
            transition: all 0.1s;
        }

        button:active {
            transform: translateY(4px);
            border-bottom: 1px solid #1e8449;
        }

        /* --- VIDEO PLAYER --- */
        video {
            width: 90%;
            max-width: 900px;
            border-radius: 15px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            border: 4px solid #fff;
        }

        .close-btn {
            position: absolute;
            top: 20px; right: 20px;
            background: rgba(255,255,255,0.2);
            color: white;
            width: 40px; height: 40px;
            border-radius: 50%;
            border: 2px solid white;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="scena">
        <div id="area-regali" onclick="apriBusta()">
            <div class="fumetto">APRIMI!</div>
        </div>
    </div>

    <div id="overlay-busta">
        <div class="busta-box">
            <h2>A chi Ã¨ destinato?</h2>
            <p style="color:#8b4513; font-size:18px;">Scrivi il nome sulla busta:</p>
            <input type="text" id="nomeInput" placeholder="Nome...">
            <br>
            <button onclick="controllaNome()">SCARTA</button>
            <p id="messaggio-errore" style="color:#c0392b; display:none; margin-top:15px; font-weight:bold;">Mmh, non trovo il regalo!</p>
            <p style="font-size:14px; color:#a4b0be; margin-top:20px; cursor:pointer; text-decoration:underline;" onclick="chiudiBusta()">Torna alla baita</p>
        </div>
    </div>

    <div id="video-container">
        <video id="player" controls></video>
        <button class="close-btn" onclick="location.reload()">X</button>
    </div>

    <script>
        // CONFIGURAZIONE
        const databaseRegali = {
            "marco": "video/auguri_marco.mp4",
            "giulia": "video/auguri_giulia.mp4",
            "mamma": "video/auguri_mamma.mp4",
        };
        
        const videoGenerico = "video/auguri_generici.mp4";

        // LOGICA
        function apriBusta() {
            document.getElementById('overlay-busta').style.display = 'flex';
            document.getElementById('nomeInput').focus();
        }

        function chiudiBusta() {
            document.getElementById('overlay-busta').style.display = 'none';
        }

        function controllaNome() {
            let nomeInput = document.getElementById('nomeInput').value.trim().toLowerCase();
            let player = document.getElementById('player');
            
            if (nomeInput === "") return;

            if (databaseRegali[nomeInput]) {
                player.src = databaseRegali[nomeInput];
            } else {
                player.src = videoGenerico;
            }

            document.getElementById('overlay-busta').style.display = 'none';
            document.getElementById('video-container').style.display = 'flex';
            player.play();
        }
        
        // Permette di premere INVIO invece di cliccare il bottone
        document.getElementById("nomeInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                controllaNome();
            }
        });
    </script>
</body>
</html>
